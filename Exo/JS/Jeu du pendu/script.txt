// Fonction pour réinitialiser le jeu
function resetGame() {
  errors = 0;
  word = words[Math.floor(Math.random() * words.length)];
  found = new Array(word.length).fill('-').join('');
  document.getElementById('found').textContent = found;
  document.getElementById('errors').textContent = `Erreurs: ${errors}`;
}

const words = ["effet", "pendu", "ordinateur", "javascript"];
let word = words[Math.floor(Math.random() * words.length)];
let errors = 0;
let found = new Array(word.length).fill('-').join('');
const drawings = ["", "O", "O-", "O--", "O--<", "O--<|>", "O--<|>-"];
const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
const lettersContainer = document.getElementById('letters');

// Générer les boutons pour chaque lettre de l'alphabet
letters.split('').forEach(letter => {
  const button = document.createElement('button');
  button.textContent = letter;
  button.addEventListener('click', handleLetterClick);
  lettersContainer.appendChild(button);
});

// Initialise l'affichage
document.getElementById('found').textContent = found;

function handleLetterClick(event) {
  const clickedLetter = event.target.textContent.toLowerCase();

  let updatedFound = '';
  let letterFound = false;

  for (let i = 0; i < word.length; i++) {
    if (word[i] === clickedLetter) {
      updatedFound += clickedLetter;
      letterFound = true;
    } else {
      updatedFound += found[i];
    }
  }

  if (!letterFound) {
    errors++;
    document.getElementById('errors').textContent = `Erreurs: ${errors} ${drawings[errors]}`;
    if (errors >= 6) {
      alert("Vous avez perdu!");
      resetGame();
      return;
    }
  }

  found = updatedFound;
  document.getElementById('found').textContent = found;

  if (!found.includes('-')) {
    alert("Vous avez gagné!");
    resetGame();
  }
}

// Gestion du clavier
document.addEventListener('keydown', (event) => {
  const keyName = event.key.toUpperCase();
  if (letters.includes(keyName)) {
    // Simule un clic sur le bouton correspondant
    const button = Array.from(document.querySelectorAll('button')).find(b => b.textContent === keyName);
    if (button) button.click();
  }
});
